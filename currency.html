<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Currency Converter 9000</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Anta&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link href="https://fonts.googleapis.com/css2?family=Anta&family=Kdam+Thmor+Pro&display=swap" rel="stylesheet"> 
</head>
<style>*{
    margin: 0;
    padding: 0;
}
body{
    background-color: rgb(119, 115, 115);
    min-height: 100vh;
}
nav{
    font-family: sans-serif;
    font-weight: 600;
    display: flex;
    background-color: rgb(255, 102, 0);
    justify-content: center;
    align-items: center;
}
.icon{
    margin: 0 23px;
    padding: 12px 0;
    font-family: "Anta", sans-serif;
    font-size: 1.3rem;
    font-weight: 600;
    font-style: normal;
    cursor: pointer;
}
.container{
    min-height: 100vh;
    font-family: sans-serif;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;

}
.info_cnvrt{
    font-family: "Kdam Thmor Pro",sans-serif;
    padding:30px;
    background-color:rgb(27, 25, 25) ;
    border-radius: 30px; 
    text-align: center;
    font-weight: 800;
    margin: 50px; 
    color: rgb(255, 94, 0);
    width: 80vw;
}
.info_cnvrt:hover{
    color: black;
    background-color: red;
    transition: 0.5s;
    transition-timing-function: ease;
}
form{
    margin:30px;
    padding: 80px;
    background-color: rgb(255, 102, 0);
    display: flex;
    align-items: center;
    justify-content: space-around;
    flex-direction: column;
    border-radius: 2rem; 
}
form select,input,button{
    width: 100%;
    border: none;
    outline: none;
    margin: 0.75rem;
    border-radius: 8px;
    padding: 0.6rem;
    text-align: center;
}
form input{
    border: 2px solid rgb(0, 0, 0) !important;
    font-size: 1.2rem;
    width: 80%;
}
.dropdown{
    display: flex;
    margin-top: 1rem;
    align-items: center;
    justify-content: center;    
}
.dropdown i{
    margin: 2rem;
    margin-top:3.5rem ;
    font-size: 1.5rem;
}
.select-container select{
    width: auto;
    cursor: pointer;
}
.select-container{
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: rgb(168, 168, 168) ;
    border-radius: 8px;
    padding: 0.3rem;
    border: 2px solid rgb(0, 0, 0) !important;
}
form button{
    width: 100%;
    font-weight: 700;
    border: 1px solid black;
    cursor: pointer;
}
.select-container img{
    max-width: 4rem;
    border-radius: 8px;
}
.msg{
    margin-top: 6px;
    font-weight: 600;
    background-color: white;
    border-radius: 2rem;
    padding: 12px;
}
.amount p, 
.dropdown p{
    font-weight: 800;
    margin: px;
    color: rgb(0, 0, 0);
    font-size: 1.2rem;
    text-align: center;
}
.footer{
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.2rem;
    height: 3rem;
    background-color:rgb(255, 102, 0);
    font-family: sans-serif;
    text-align: center;
    font-weight: 800;
}</style>
<body> 
    <nav>
       <div class="icon">Currency Converter 9000</div>
</nav>
<!-- Warning Container  -->
<div class="container"> 
   <div class="info_cnvrt"> <h1>Currency converter 9000</h1>
    <p>Warning: IT's over 9000</p></div>

    <!-- Converter Container  -->
    <form>
        <div class="amount">
            <p>Enter Amount</p>
            <input type="text" value="100">
        </div> 
        <div class="dropdown">
            <div class="from">
                <p>From</p>
                <div class="select-container">
                    <img src="https://flagsapi.com/US/flat/64.png">
                    <select name="from">
                    </select>
                </div>
            </div>
            <i class="fa-solid fa-right-left"></i>
            <div class="to">
                <p>TO</p>
                <div class="select-container">
                    <img src="https://flagsapi.com/PK/flat/64.png">
                    <select name="to">
                    </select>
                </div>
            </div>
        </div>
        <div class="msg">Getting Exchange Rate.....</div>
        <button>Get Exchange Rate </button>
    </form>
</div> 
<div class="footer">
    <span>COPY RIGHT &copy; all rights reserved by Me 2024</span>
</div>
<script src="code.js"></script>
<script>
    const dropdowns = document.querySelectorAll(".dropdown select");
    const btn = document.querySelector("form button");
    const fromCurr = document.querySelector(".from select");
    const toCurr = document.querySelector(".to select");
    const msg = document.querySelector(".msg");
    
    for (let select of dropdowns) {
        for (currCode in countryList) {
            // console.log(code, countryList[currCode] );
            let newOption = document.createElement("option");
            newOption.innerText = currCode;
            newOption.value = currCode;
            if (select.name === "from" && currCode === "USD") {
                newOption.selected = "selected";
            } else if (select.name === "to" && currCode === "PKR") {
                newOption.selected = "selected";
            }
            select.append(newOption);
        }
    
        select.addEventListener("change", (evt) => {
            updateFlag(evt.target);
        });
    };
    
    const updateFlag = (element) => {
        let currCode = element.value;
        let countryCode = countryList[currCode];
        let newSrc = `https://flagsapi.com/${countryCode}/flat/64.png`;
        let img = element.parentElement.querySelector("img");
        img.src = newSrc;
    };
    
    btn.addEventListener('click', async (evt) => {
        evt.preventDefault();
        let amount = document.querySelector(".amount input");
        let amtVal = amount.value;
        if (amtVal == "" || amtVal < 1) {
            amtVal = 1;
            amount.value = "1";
        };
    
    
        let url = `https://v6.exchangerate-api.com/v6/66c2b7b1c9a0a0ac78e3da02/latest/${fromCurr.value}`
        fetch(url).then(response => response.json()).then(result => {
            let exchangeRate = result.conversion_rates[toCurr.value];
            let totalExchangeRate = (amtVal * exchangeRate).toFixed(2);
    
            msg.innerText =`${amtVal} ${fromCurr.value} = ${totalExchangeRate} ${toCurr.value}`;
        });
    })
    
    
    </script>
</body> 
</html>